# https://help.reg.ru/hc/ru/articles/4408047401233-%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B-%D1%81-MySQL

# 1. Установить mariaBD
#     sudo apt-get install mariadb-server
# 1.1. Разрешить внешнее управление
# https://www.oslogic.ru/knowledge/1085/nastrojka-udalennogo-dostupa-mysql-i-mariadb-v-linux-ubuntu/

# sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf
#     заменить 127.0.0.1 на 0.0.0.0
# systemctl restart mariadb


# 4.
# https://dondub.com/2021/06/rabota-s-bazami-dannyh-i-polzovatelyami-v-mysql-i-mariadb/

# 5. sudo apt-get purge mariadb-*    (удаление)

# полное удаление mariaDB UBUNTU
# (для Debian пути и команды могут отличаться)
# sudo apt-get --purge remove mariadb*
# sudo apt-get autoremove
# sudo apt-get autoclean
#
# если возникают ошибки при удалении -
# заходим в папку /var/lib/dpkg/info
# и удаляем там всё что начинается на mariadb и на mysql
# повторяем предыдущие три команды
#
# после желательно
# sudo apt-get --purge remove mysql*
# sudo apt-get autoremove
# sudo apt-get autoclean

# 6. sudo netstat -tlp (проверить удаленыли процессы)

    cursor.execute("""CREATE TABLE Documents(Id INT PRIMARY KEY AUTO_INCREMENT, ProjectsId INT NOT NULL,
                                              Section_other_documentation VARCHAR(50) NOT NULL,
                                              Part_other_documentation_dpb VARCHAR(50) NOT NULL,
                                              Part_other_documentation_gochs VARCHAR(50) NOT NULL,
                                              Book_dpb VARCHAR(50) NOT NULL,
                                              Code_dpb VARCHAR(10) NOT NULL,
                                              Tom_dpb VARCHAR(10) NOT NULL,
                                              Book_rpz VARCHAR(50) NOT NULL,
                                              Code_rpz VARCHAR(10) NOT NULL,
                                              Tom_rpz VARCHAR(10) NOT NULL,
                                              Book_ifl VARCHAR(50) NOT NULL,
                                              Code_ifl VARCHAR(10) NOT NULL,
                                              Tom_ifl VARCHAR(10) NOT NULL,
                                              Book_gochs VARCHAR(50) NOT NULL,
                                              Code_gochs VARCHAR(10) NOT NULL,
                                              Tom_gochs VARCHAR(10) NOT NULL,
                                              Section_fire_safety VARCHAR(50) NOT NULL,
                                              Code_fire_safety VARCHAR(10) NOT NULL,
                                              Tom_fire_safety VARCHAR(10) NOT NULL,
                                              CONSTRAINT documentss_projects_fk FOREIGN KEY (ProjectsId)
                                              REFERENCES Projects (Id) ON DELETE CASCADE)""")

    # 4. Документы
    query7 = f"INSERT INTO Documents (" \
             f"ProjectsId, " \
             f"Section_other_documentation, " \
             f"Part_other_documentation_dpb, " \
             f"Part_other_documentation_gochs, " \
             f"Book_dpb, Code_dpb, Tom_dpb, " \
             f"Book_rpz, Code_rpz, Tom_rpz, " \
             f"Book_ifl, Code_ifl, Tom_ifl, " \
             f"Book_gochs, Code_gochs, Tom_gochs, " \
             f"Section_fire_safety, " \
             f"Code_fire_safety, " \
             f"Tom_fire_safety) " \
             f"VALUES( " \
             f"% s, % s, % s, % s, % s, " \
             f"% s, % s, % s, % s, % s, " \
             f"% s, % s, % s, % s, % s, " \
             f"% s, % s, % s, % s)"

    val7 = (1,
            "Раздел 12 «Иная документация в случаях, предусмотренных федеральными законами»",
            "Часть 1. Декларация промышленной безопасности",
            "Часть 2. «Перечень мероприятий по гражданской обороне»",
            "Книга 1. Декларация промышленной безопасности", "ДПБ1", "12.1.1",
            "Книга 2. Расчентно-пояснительная записка", "ДПБ2", "12.1.2",
            "Книга 3. Информационный лист", "ДПБ3", "12.1.3",
            "", "ГОЧС", "12.2",
            "Раздел 9 «Мероприятия по обеспечению пожарной безопасности»", "ПБ", "9")
    cursor.execute(query7, val7)